---
title: MySQL 性能优化
layout: page
date: 2016-07-30
---
[TOC]

## 数据库优化的四个方面
- 数据库设计
- SQL 语句优化
- 数据库参数配置
- 硬件升级

## 数据库设计
### 3NF 设计
- 1NF：字段是最小的的单元不可再分
- 2NF：满足1NF,表中的字段必须完全依赖于全部主键而非部分主键
- 3NF：满足2NF,非主键外的所有字段必须互不依赖

### 合理地使用索引
- 普通索引:最基本的索引，它没有任何限制。
- 主键索引:一种特殊的唯一索引，不允许有空值。
- 唯一索引:索引列的值必须唯一，但允许有空值。
- 组合索引:用多个字段建立索引，遵循“最左前缀”原则。

设置了索引但无法使用的情况：

- 以“%”开头的LIKE语句，模糊匹配
- OR语句前后没有同时使用索引
- 数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）
### 分表技术
#### 垂直拆分
- 将业务紧密，表间关联密切的表划分到单独的数据库中。
#### 水平拆分
- 根据一定的规则将同一个表中的不同数据拆分到不同的数据库中

### 读写分离
让主数据库处理事务性查询，而从数据库处理SELECT查询。但是从从库读会有延迟，需要等待主从同步。

## SQL语句优化
1. 通过show status命令了解各种SQL的执行频率。
2. 定位执行效率较低的SQL语句（慢查询日志）
3. 通过explain分析低效率的SQL
4. 确定问题并采取相应的优化措施

## 数据库参数配置
通过配置调整内存和最大连接数

## 选择合适的硬件配置

_参考文章_
- [Mysql性能优化一](http://www.cnblogs.com/jiekzou/p/5371085.html)
- [Mysql性能优化二](http://www.cnblogs.com/jiekzou/p/5380073.html)
- [Mysql性能优化三](http://www.cnblogs.com/jiekzou/p/5399160.html)